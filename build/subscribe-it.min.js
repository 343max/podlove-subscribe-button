var IframeResizer,SubscribeButton,SubscribeIt,SubscribePopup,SubscribePopupIframe,__hasProp={}.hasOwnProperty;IframeResizer=function(){function t(t,e,n,i){null==n&&(n={}),window.addEventListener("message",function(r){var o,s,u;return s=JSON.parse(r.data),s.id===t?(o=s.height+(n.height||0),u=s.width+(n.width||0),e.style.height=""+o+"px",e.style.width=""+u+"px",null!=i?i(e):void 0):void 0},!1)}return t.buildData=function(t,e,n){return'{"id": "'+t+'", "height": '+e+', "width": '+n+"}"},t}(),SubscribeIt=function(){function t(t){this.scriptElem=t,this.extractScriptPath(),this.extractFeedUrl(),this.extractButtonLanguage(),this.renderIframe()}return t.init=function(e){var n,i,r,o,s;for(null==e&&(e="subscribe-it"),i=document.getElementsByName(e),s=[],r=0,o=i.length;o>r;r++)n=i[r],s.push(new t(n));return s},t.prototype.extractScriptPath=function(){return this.pathPrefix=this.scriptElem.src.match(/(^.*\/)/)[0]},t.prototype.extractFeedUrl=function(){return this.feedUrl=this.scriptElem.dataset.url.replace(/^https?:\/\//,"")},t.prototype.extractButtonLanguage=function(){return this.buttonLanguage=this.scriptElem.dataset.lang||"en"},t.prototype.renderIframe=function(){var t;return t=this.buildIframe(),this.scriptElem.parentElement.replaceChild(t,this.scriptElem)},t.prototype.buildIframe=function(){var t;return t=document.createElement("iframe"),t.src=""+this.pathPrefix+"button.html?language="+this.buttonLanguage,t.style.border="none",t.style.display="inline-block",t.style.overflow="hidden",t.onload=function(e){return function(){return t.contentDocument.addEventListener("click",function(){return new SubscribePopupIframe(t,e.feedUrl,e.pathPrefix)})}}(this),new IframeResizer("resizeButton",t),t},t}(),new SubscribeIt.init,SubscribePopupIframe=function(){function t(t,e,n){this.buttonIframe=t,this.feedUrl=e,this.pathPrefix=n,this.insert(),this.addCloseListener()}return t.prototype.build=function(){var t;return t=document.createElement("iframe"),t.src=""+this.pathPrefix+"popup.html?feedUrl="+this.feedUrl,t.style.border="none",t.style.position="absolute",t.style.top=this.buttonDimensions().bottom+"px",t.style.left=this.buttonDimensions().left+"px",new IframeResizer("resizePopup",t),this.iframe=t},t.prototype.insert=function(){return document.body.appendChild(this.build())},t.prototype.remove=function(){return this.iframe.parentNode.removeChild(this.iframe)},t.prototype.addCloseListener=function(){var t;return document.body.addEventListener("click",function(){return document.body.dispatchEvent(new Event("click.subscribe-it"))}),t=function(e){return function(){return e.remove(),document.body.removeEventListener("click.subscribe-it",t)}}(this),document.body.addEventListener("click.subscribe-it",t)},t.prototype.buttonDimensions=function(){return null!=this.buttonRect?this.buttonRect:this.buttonRect=this.buttonIframe.getBoundingClientRect()},t}(),SubscribePopup=function(){function t(){this.list=document.getElementById("subscribe-it-list"),this.extractFeedUrl(),this.addButtons(),this.addLinkField(),this.resizeIframe()}return t.prototype.extractFeedUrl=function(){return this.feedUrl=window.location.search.split("=")[1]},t.prototype.addButtons=function(){var t,e,n,i,r;n=SubscribeIt.UA.detect(),i=SubscribeIt.Clients,r=[];for(e in i)__hasProp.call(i,e)&&(t=i[e],r.push(-1!==t.platform.indexOf(n)?this.addButton(t):void 0));return r},t.prototype.addButton=function(t){var e,n;return n=document.createElement("a"),e=document.createElement("li"),n.href=t.scheme+"://"+this.feedUrl,n.target="_blank",n.innerHTML=t.title,e.appendChild(n),this.list.appendChild(e)},t.prototype.addLinkField=function(){var t,e;return t=document.createElement("input"),t.value=this.feedUrl,t.onclick=function(){return this.select()},e=document.createElement("li"),e.className="subscribe-it-link-input",e.appendChild(t),this.list.appendChild(e)},t.prototype.resizeIframe=function(){var t,e,n;return t=document.body.offsetHeight,n=document.body.offsetWidth,e=IframeResizer.buildData("resizePopup",t,n),window.parent.postMessage(e,"*")},t}(),SubscribeButton=function(){function t(){var t,e,n,i,r;n=window.location.search.split("=")[1],t=document.getElementById("subscribe-it-button"),t.innerHTML=SubscribeIt.Translations.button[n],e=t.offsetHeight,r=t.clientWidth,i=IframeResizer.buildData("resizeButton",e,r),window.parent.postMessage(i,"*")}return t}(),SubscribeIt.UA=function(){return{detect:function(){var t,e,n,i;n=window.navigator&&navigator.userAgent||"",i=SubscribeIt.UAs;for(e in i)if(__hasProp.call(i,e)&&(t=i[e],t.test(n)))return e}}}(),SubscribeIt.UAs={android:/android/i,ios:/(ipad|iphone|ipod)/i,linux:/linux/i,mac:/macintosh/i,windowsPhone:/windows phone/i},SubscribeIt.Translations={button:{de:"Abonnieren",en:"Subscribe",fr:"S'Abonner"}},SubscribeIt.Clients={applepodcastsapp:{title:"Apple Podcasts",scheme:"pcast",platform:["ios"]},downcast:{title:"Downcast",scheme:"downcast",platform:["ios","mac"]},instacast:{title:"Instacast",scheme:"instacast",platform:["ios","mac"]},pocketcasts:{title:"PocketCasts",scheme:"pcast",platform:["ios","android"]}};