var IframeResizer,SubscribeButton,SubscribeIt,SubscribePopup,SubscribePopupIframe,__hasProp={}.hasOwnProperty;IframeResizer=function(){function t(t,e,n,i){null==n&&(n={}),window.addEventListener("message",function(){return function(r){var s,o,a;return o=JSON.parse(r.data),o.id===e.id&&o.listenTo===t?(s=o.height+(n.height||0),a=o.width+(n.width||0),e.style.height=""+s+"px",e.style.width=""+a+"px",null!=i?i(e):void 0):void 0}}(this),!1)}return t.buildData=function(t,e,n,i){return'{"id": "'+i+'", "listenTo": "'+t+'", "height": '+e+', "width": '+n+"}"},t}(),SubscribeIt=function(){function t(t){this.scriptElem=t,this.extractScriptPath(),this.extractFeedUrl(),this.extractButtonLanguage(),this.extractButtonSize(),this.extractPodcastData(),this.renderIframe()}return t.init=function(e){var n,i,r,s,o;for(null==e&&(e="subscribe-it"),i=document.getElementsByName(e),o=[],r=0,s=i.length;s>r;r++)n=i[r],o.push(new t(n));return o},t.prototype.extractScriptPath=function(){return this.pathPrefix=this.scriptElem.src.match(/(^.*\/)/)[0]},t.prototype.extractFeedUrl=function(){return this.feedUrl=this.scriptElem.dataset.url.replace(/^https?:\/\//,"")},t.prototype.extractButtonLanguage=function(){return this.buttonLanguage=this.scriptElem.dataset.lang||"en"},t.prototype.extractButtonSize=function(){return this.buttonSize=this.scriptElem.dataset.size||"medium"},t.prototype.extractPodcastData=function(){var t;return(t=this.scriptElem.dataset.podcast)?this.podcast=JSON.parse(t.replace(/'/g,'"')):void 0},t.prototype.buttonParams=function(){return{size:this.buttonSize,language:this.buttonLanguage}},t.prototype.renderIframe=function(){var t;return t=this.buildIframe(),this.scriptElem.parentElement.replaceChild(t,this.scriptElem)},t.prototype.buildIframe=function(){var t,e;return t=Math.floor(65536*(1+Math.random())).toString(16).substring(1),e=document.createElement("iframe"),e.src=""+this.pathPrefix+"button.html?language="+this.buttonLanguage+"&size="+this.buttonSize+"&id="+t,e.style.border="none",e.style.display="block",e.style.overflow="hidden",e.className="podlove-subscribe-button",e.id=t,e.onload=function(t){return function(){return e.contentDocument.addEventListener("click",function(){return new SubscribePopupIframe(e,t.feedUrl,t.pathPrefix,t.podcast)})}}(this),new IframeResizer("resizeButton",e),e},t}(),new SubscribeIt.init,SubscribePopupIframe=function(){function t(t,e,n,i){this.buttonIframe=t,this.feedUrl=e,this.pathPrefix=n,this.podcast=i,this.insert(),this.addCloseListener()}return t.prototype.build=function(){var t;return t=document.createElement("iframe"),t.className="subscribe-it-popup-iframe",t.src=""+this.pathPrefix+"popup.html?feedUrl="+this.feedUrl+"&podcastName="+this.podcast.name+"&podcastCoverUrl="+this.podcast.coverUrl,t.style.border="none",t.style.position="absolute",t.style.height="100vh",t.style.width="100vw",t.style.top=0,t.style.left=0,this.iframe=t},t.prototype.insert=function(){return document.body.appendChild(this.build())},t.prototype.remove=function(){return this.iframe.parentNode.removeChild(this.iframe)},t.prototype.addCloseListener=function(){var t,e;return document.body.addEventListener("click",function(){return document.body.dispatchEvent(new Event("click.subscribe-it"))}),t=function(t){return"closepopup"===JSON.parse(t.data).message?e():void 0},window.addEventListener("message",t,!1),document.body.addEventListener("click.subscribe-it",e),e=function(n){return function(){return n.remove(),document.body.removeEventListener("click.subscribe-it",e),window.removeEventListener("message",t,!1)}}(this)},t.prototype.buttonDimensions=function(){return null!=this.buttonRect?this.buttonRect:this.buttonRect=this.buttonIframe.getBoundingClientRect()},t}(),SubscribePopup=function(){function t(){var t;this.extractParams(),this.body=document.getElementById("subscribe-it-popup"),this.container=document.getElementById("subscribe-it-list-container"),this.closeButton=document.getElementById("subscribe-it-popup-close-button"),this.leftSide=document.getElementById("subscribe-it-popup-modal-left"),this.list=document.getElementById("subscribe-it-list"),t=window.location,this.pathPrefix=t.href.replace(t.search,"").match(/(^.*\/)/)[0],this.addCloseHandler(),this.addButtons(),this.addPodcastInfo()}return t.prototype.addPodcastInfo=function(){var t,e;return e=document.createElement("div"),e.innerHTML=this.params.podcastName,this.leftSide.appendChild(e),t=document.createElement("img"),t.src=this.params.podcastCoverUrl,this.leftSide.appendChild(t)},t.prototype.extractParams=function(){var t,e,n,i,r,s;for(n=window.location.search.replace(/^\?/,""),e=n.split("&"),this.params={},s=[],i=0,r=e.length;r>i;i++)t=e[i],s.push(this.buildParamObject(t,this.params));return s},t.prototype.buildParamObject=function(t,e){var n;return n=t.split("="),e[n[0]]=decodeURIComponent(n[1])},t.prototype.addCloseHandler=function(){var t;return t=function(){return window.parent.postMessage('{"message": "closepopup"}',"*")},this.closeButton.addEventListener("click",function(){return t()})},t.prototype.addButtons=function(){var t,e,n,i,r;n=SubscribeIt.UA.detect(),i=SubscribeIt.Clients,r=[];for(e in i)__hasProp.call(i,e)&&(t=i[e],r.push(-1!==t.platform.indexOf(n)?this.addButton(t):void 0));return r},t.prototype.addButton=function(t){var e,n,i,r;return r=document.createElement("span"),i=document.createElement("a"),n=document.createElement("li"),i.href=t.scheme+"://"+this.params.feedUrl,i.target="_blank",r.innerHTML=t.title,i.appendChild(r),t.icon&&(e=document.createElement("img"),e.src=""+this.pathPrefix+"images/"+t.icon,i.insertBefore(e,i.firstChild)),n.appendChild(i),this.list.appendChild(n)},t.prototype.addLinkField=function(){var t,e;return this.inputContainer=document.getElementById("subscribe-it-feed-link-input"),t=document.createElement("input"),t.value=this.params.feedUrl,t.style.textAlign="center",t.onclick=function(){return this.select()},e=document.createElement("div"),e.className="subscribe-it-link-input",e.appendChild(t),this.inputContainer.appendChild(e)},t}(),SubscribeButton=function(){function t(){var t,e,n;this.extractParams(),e=window.location.search.split("=")[1],n=window.location.search.split("=")[1],t=document.getElementById("subscribe-it-button"),t.className=this.params.size,t.innerHTML="<span>"+SubscribeIt.Translations.button[this.params.language]+"</span>",this.resizeIframe(t)}return t.prototype.extractParams=function(){var t,e,n,i,r,s;for(n=window.location.search.replace(/^\?/,""),e=n.split("&"),this.params={},s=[],i=0,r=e.length;r>i;i++)t=e[i],s.push(this.buildParamObject(t,this.params));return s},t.prototype.buildParamObject=function(t,e){var n;return n=t.split("="),e[n[0]]=n[1]},t.prototype.resizeIframe=function(t){var e,n,i,r,s,o;return s=document.defaultView.getComputedStyle(t),e=parseInt(s.height,10),o=parseInt(s.width,10),n=e+2,i=o,r=IframeResizer.buildData("resizeButton",n,i,this.params.id),window.parent.postMessage(r,"*")},t}(),SubscribeIt.UA=function(){return{detect:function(){var t,e,n,i;n=window.navigator&&navigator.userAgent||"",i=SubscribeIt.UAs;for(e in i)if(__hasProp.call(i,e)&&(t=i[e],t.test(n)))return e}}}(),SubscribeIt.UAs={android:/android/i,ios:/(ipad|iphone|ipod)/i,linux:/linux/i,mac:/macintosh/i,windowsPhone:/windows phone/i},SubscribeIt.Translations={button:{de:"Abonnieren",en:"Subscribe",fr:"S'Abonner"}},SubscribeIt.Clients={antennapod:{title:"AntennaPod",scheme:"pcast",platform:["android"]},applepodcastsapp:{title:"Apple Podcasts",scheme:"pcast",platform:["ios"]},beyondpod:{title:"BeyondPod",scheme:"pcast",platform:["android"]},downcast:{title:"Downcast",scheme:"downcast",platform:["ios","mac"],icon:"downcast.png"},instacast:{title:"Instacast",scheme:"instacast",platform:["ios","mac"],icon:"instacast.png"},itunes:{title:"iTunes",scheme:"itpc",platform:["mac"],icon:"itunes.png"},pocketcasts:{title:"PocketCasts",scheme:"pcast",platform:["android","ios"]},podcat:{title:"Podcat",scheme:"podcat",platform:["ios"]},windowspodcastsapp:{title:"Podcasts",scheme:"podcast",platform:"windowsPhone"},windowstest:{title:"Other App",scheme:"wp-podcast",platform:"windowsPhone"}};